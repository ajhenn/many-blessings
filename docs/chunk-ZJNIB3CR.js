import{a as j,c as y}from"./chunk-3XJP2J3E.js";import{a as V}from"./chunk-M4HJK3TZ.js";import{a as I,f as D,i as W,j as B,k as O,l as R,n as k,o as N,r as F,t as L}from"./chunk-MJZCBBYR.js";import{fa as T}from"./chunk-P5QJXQCF.js";import{Bb as A,Cb as w,Eb as i,Fb as e,Gb as g,Hb as M,Jb as b,Kb as s,Ua as m,Yb as r,_b as f,ac as h,ba as v,bc as C,cc as _,eb as E,ha as p,ia as c,yb as S,zb as x}from"./chunk-2OOBEJUY.js";var z=(d,l)=>l.id;function H(d,l){if(d&1){let a=M();i(0,"button",7),b("click",function(){p(a);let t=s();return c(t.getDbContent())}),i(1,"mat-icon"),r(2,"search"),e(),r(3," Check Prayers "),e()}}function q(d,l){if(d&1&&(i(0,"span"),r(1),e(),g(2,"br"),i(3,"span"),r(4),e(),g(5,"br"),i(6,"span"),r(7),e(),g(8,"br"),i(9,"span"),r(10),e(),g(11,"br")(12,"br")),d&2){let a=l.$implicit;m(),f("Prayer: \xA0 ",a.prayer),m(3),f("Author: \xA0 ",a.author),m(3),f("Record ID: \xA0 ",a.id),m(3),f("Approve: \xA0 ",a.approved)}}function K(d,l){d&1&&(i(0,"span",8),r(1,"No records in the database."),e())}function U(d,l){if(d&1){let a=M();i(0,"p")(1,"mat-form-field",1)(2,"mat-label"),r(3,"Prayer to approve"),e(),i(4,"textarea",2),_("ngModelChange",function(t){p(a);let n=s(2);return C(n.adminPrayerContent,t)||(n.adminPrayerContent=t),c(t)}),e()()(),i(5,"p")(6,"mat-form-field")(7,"mat-label"),r(8,"Author to approve"),e(),i(9,"input",3),_("ngModelChange",function(t){p(a);let n=s(2);return C(n.adminAuthorContent,t)||(n.adminAuthorContent=t),c(t)}),e()()(),i(10,"p")(11,"mat-form-field")(12,"mat-label"),r(13,"Record ID"),e(),i(14,"input",9),_("ngModelChange",function(t){p(a);let n=s(2);return C(n.approvedId,t)||(n.approvedId=t),c(t)}),b("ngModelChange",function(){p(a);let t=s(2);return c(t.getRecordContent(t.approvedId))}),e()()(),i(15,"p")(16,"mat-form-field")(17,"mat-label"),r(18,"Select 1 to approve"),e(),i(19,"input",10),_("ngModelChange",function(t){p(a);let n=s(2);return C(n.adminApproved,t)||(n.adminApproved=t),c(t)}),e()()(),i(20,"div",4)(21,"button",5),b("click",function(){p(a);let t=s(2);return c(t.approvePrayer())}),i(22,"mat-icon"),r(23,"add"),e(),r(24," Approve Prayer "),e()()}if(d&2){let a=s(2);m(4),h("ngModel",a.adminPrayerContent),m(5),h("ngModel",a.adminAuthorContent),m(5),h("ngModel",a.approvedId),m(5),h("ngModel",a.adminApproved)}}function Y(d,l){if(d&1&&(A(0,q,13,4,null,null,z,!1,K,2,0,"span",8),S(3,U,25,4)),d&2){let a=s();w(a.dbContent),m(3),x(a.dbContent?3:-1)}}var re=(()=>{let l=class l{constructor(){this.dbService=v(j),this.route=v(I),this.prayerContent="",this.authorContent="",this.approved=0,this.adminPrayerContent="",this.adminAuthorContent="",this.adminApproved=0,this.approvedId=0,this.showEditMode=!1}ngOnInit(){this.route.snapshot.queryParamMap.get("modify")==="true"?(this.showEditMode=!0,this.getDbContent()):this.showEditMode=!1}submitPrayer(){let o={prayer:this.prayerContent,author:this.authorContent,approved:this.approved};this.dbService.add(y.DB_STORE_NAME,o).subscribe(()=>{this.prayerContent="",this.authorContent="",this.getDbContent()})}getDbContent(){this.dbService.getAll(y.DB_STORE_NAME).subscribe(o=>{this.dbContent=o})}getRecordContent(o){o!=null&&typeof o=="number"?this.dbService.getByKey(y.DB_STORE_NAME,o).subscribe(n=>{console.log("result of record search = ",n),n?(this.adminPrayerContent=n.prayer,this.adminAuthorContent=n.author,this.adminApproved=n.approved,this.approvedId=n.id):(console.log("Record not found!"),this.adminPrayerContent="",this.adminAuthorContent="",this.adminApproved=0)}):console.log("Invalid recordId!")}approvePrayer(){let o=this.updateContent();this.dbService.update(y.DB_STORE_NAME,o).subscribe(()=>{this.adminPrayerContent="",this.adminAuthorContent="",this.adminApproved=0,this.approvedId=0,this.getDbContent()})}updateContent(){let o={approved:this.adminApproved,id:this.approvedId};return this.adminPrayerContent&&!this.adminAuthorContent?o={prayer:this.adminPrayerContent,approved:this.adminApproved,id:this.approvedId}:!this.adminPrayerContent&&this.adminAuthorContent?o={author:this.adminAuthorContent,approved:this.adminApproved,id:this.approvedId}:this.adminPrayerContent&&this.adminAuthorContent&&(o={prayer:this.adminPrayerContent,author:this.adminAuthorContent,approved:this.adminApproved,id:this.approvedId}),o}clearDatabase(){this.dbService.clear(y.DB_STORE_NAME).subscribe(o=>{console.log("Database cleared success? ",o)})}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=E({type:l,selectors:[["app-prayer-submission"]],decls:26,vars:4,consts:[[1,"submitPrayerContainer"],[1,"fieldSize"],["matInput","","placeholder","Enter prayer",1,"textAreaHeight",3,"ngModelChange","ngModel"],["matInput","","placeholder","Enter author",3,"ngModelChange","ngModel"],[1,"btn-group"],["mat-fab","","extended","",3,"click"],["mat-fab","","extended","",1,"searchBtn"],["mat-fab","","extended","",1,"searchBtn",3,"click"],[1,"no-records"],["matInput","","type","number","placeholder","Enter record ID",3,"ngModelChange","ngModel"],["matInput","","type","number","placeholder","Enter 1 to approve",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"h4"),r(2,"Add a prayer straight from your heart. \xA0"),i(3,"mat-icon"),r(4,"volunteer_activism"),e()(),i(5,"p")(6,"mat-form-field",1)(7,"mat-label"),r(8,"Your prayer"),e(),i(9,"textarea",2),_("ngModelChange",function(u){return C(n.prayerContent,u)||(n.prayerContent=u),u}),e(),i(10,"mat-hint"),r(11,"Please enter your prayer."),e()()(),i(12,"p")(13,"mat-form-field")(14,"mat-label"),r(15,"Who wrote this prayer?"),e(),i(16,"input",3),_("ngModelChange",function(u){return C(n.authorContent,u)||(n.authorContent=u),u}),e(),i(17,"mat-hint"),r(18,"Please enter a name."),e()()(),i(19,"div",4)(20,"button",5),b("click",function(){return n.submitPrayer()}),i(21,"mat-icon"),r(22,"send"),e(),r(23," Submit Prayer "),e(),S(24,H,4,0,"button",6),e(),S(25,Y,4,2),e()),t&2&&(m(9),h("ngModel",n.prayerContent),m(7),h("ngModel",n.authorContent),m(8),x(n.showEditMode?24:-1),m(),x(n.showEditMode?25:-1))},dependencies:[V,F,k,L,R,D,O,W,B,N,T],styles:[".submitPrayerContainer[_ngcontent-%COMP%]{display:grid;justify-content:center;margin:2rem 5rem 5rem}h4[_ngcontent-%COMP%]{text-align:center;padding-bottom:1rem}p[_ngcontent-%COMP%]{padding-bottom:1rem}.fieldSize[_ngcontent-%COMP%]{width:85vw}.textAreaHeight[_ngcontent-%COMP%]{height:5.77rem!important;font-size:larger!important}.btn-group[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:2rem;padding-bottom:4rem;margin-bottom:auto}.searchBtn[_ngcontent-%COMP%]{margin-left:auto}.no-records[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1rem}"]});let d=l;return d})();export{re as PrayerSubmissionComponent};
